# AI-Powered Installation Tutor

> **Interactive package education system powered by Claude AI**

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-green.svg)](https://opensource.org/licenses/Apache-2.0)

---

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Quick Start](#quick-start)
- [Usage Examples](#usage-examples)
- [Architecture](#architecture)
- [Technical Design](#technical-design)
- [API Reference](#api-reference)
- [Configuration](#configuration)
- [Testing](#testing)
- [Troubleshooting](#troubleshooting)

---

## Overview

The AI Tutor is an intelligent learning system integrated into Cortex Linux that teaches users about packages, tools, and best practices through interactive, LLM-powered sessions.

### Why AI Tutor?

| Problem | Solution |
|---------|----------|
| Documentation is scattered across the web | Consolidated, contextual lessons |
| Hard to know best practices | AI-curated recommendations |
| Learning is passive (reading docs) | Interactive Q&A and tutorials |
| No way to track what you've learned | Built-in progress tracking |
| Generic tutorials don't fit your level | Adaptive content based on profile |

---

## Features

### Core Capabilities

| Feature | Description |
|---------|-------------|
| **LLM-Powered Lessons** | Comprehensive explanations generated by Claude AI |
| **Interactive Q&A** | Ask any question and get contextual answers |
| **Code Examples** | Practical, runnable code snippets with syntax highlighting |
| **Step-by-Step Tutorials** | Hands-on walkthroughs for each package |
| **Best Practices** | Industry-standard recommendations and patterns |
| **Progress Tracking** | SQLite-backed learning history |
| **Smart Caching** | Lessons cached to reduce API costs |
| **Offline Fallbacks** | Pre-built lessons for common packages |

### Supported Packages

The tutor can teach about **any Linux package**, including:

- **Containerization**: Docker, Podman, LXC
- **Version Control**: Git, SVN, Mercurial
- **Web Servers**: Nginx, Apache, Caddy
- **Databases**: PostgreSQL, MySQL, Redis, MongoDB
- **Programming**: Python, Node.js, Go, Rust
- **DevOps**: Ansible, Terraform, Kubernetes
- **And thousands more...**

---

## Quick Start

### Prerequisites

```bash
# Ensure Cortex is installed
cortex --version

# Ensure API key is configured
echo $ANTHROPIC_API_KEY
```

### Your First Lesson

```bash
# Start an interactive Docker lesson
cortex tutor docker
```

### Output

```
  ___       _       _ _ _                  _     _____      _
 |_ _|_ __ | |_ ___| | (_) __ _  ___ _ __ | |_  |_   _|   _| |_ ___  _ __
  | || '_ \| __/ _ \ | | |/ _` |/ _ \ '_ \| __|   | || | | | __/ _ \| '__|
  | || | | | ||  __/ | | | (_| |  __/ | | | |_    | || |_| | || (_) | |
 |___|_| |_|\__\___|_|_|_|\__, |\___|_| |_|\__|   |_| \__,_|\__\___/|_|
                          |___/

ğŸ“ Loading lesson for docker...

Docker is a containerization platform that packages applications
with their dependencies into portable, isolated containers.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Select an option            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Learn basic concepts            â”‚
â”‚  2. See code examples               â”‚
â”‚  3. Follow tutorial                 â”‚
â”‚  4. View best practices             â”‚
â”‚  5. Ask a question                  â”‚
â”‚  6. Check progress                  â”‚
â”‚  7. Exit                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Select option: _
```

---

## Usage Examples

### Interactive Lesson Mode

Start a full interactive session with menus:

```bash
# Learn about Docker
cortex tutor docker

# Learn about Git
cortex tutor git

# Learn about Nginx with fresh content (skip cache)
cortex tutor nginx --fresh
```

### Quick Q&A Mode

Ask a single question without entering interactive mode:

```bash
# Ask about Docker
cortex tutor docker -q "What's the difference between images and containers?"

# Ask about Git
cortex tutor git -q "How do I undo the last commit?"

# Ask about Nginx
cortex tutor nginx -q "How do I set up a reverse proxy?"
```

**Example Output:**

```bash
$ cortex tutor docker -q "How do I reduce Docker image size?"

ğŸ¤” Thinking...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Answer                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ To reduce Docker image size, follow these strategies:          â”‚
â”‚                                                                 â”‚
â”‚ 1. Use slim/alpine base images:                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â”‚ # Instead of:                          â”‚                  â”‚
â”‚    â”‚ FROM python:3.11                       â”‚                  â”‚
â”‚    â”‚                                        â”‚                  â”‚
â”‚    â”‚ # Use:                                 â”‚                  â”‚
â”‚    â”‚ FROM python:3.11-slim                  â”‚                  â”‚
â”‚    â”‚ # Or even smaller:                     â”‚                  â”‚
â”‚    â”‚ FROM python:3.11-alpine                â”‚                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                 â”‚
â”‚ 2. Use multi-stage builds:                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â”‚ FROM node:18 AS builder                â”‚                  â”‚
â”‚    â”‚ WORKDIR /app                           â”‚                  â”‚
â”‚    â”‚ RUN npm ci && npm run build            â”‚                  â”‚
â”‚    â”‚                                        â”‚                  â”‚
â”‚    â”‚ FROM nginx:alpine                      â”‚                  â”‚
â”‚    â”‚ COPY --from=builder /app/dist /usr/...â”‚                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                 â”‚
â”‚ 3. Combine RUN commands to reduce layers                        â”‚
â”‚ 4. Use .dockerignore to exclude unnecessary files               â”‚
â”‚ 5. Clean up package manager cache in the same layer             â”‚
â”‚                                                                 â”‚
â”‚ ğŸ’¡ Tip: Use `docker history <image>` to analyze layer sizes    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Progress Tracking

Track your learning journey:

```bash
# View all progress
cortex tutor --progress

# View progress for specific package
cortex tutor --progress docker

# List all packages you've studied
cortex tutor --list
```

**Example Output:**

```bash
$ cortex tutor --progress

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Learning Progress                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Package     Topics Completed    Score    Last Studied          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  docker      4/5                 85%      2 hours ago           â”‚
â”‚  git         3/5                 70%      Yesterday             â”‚
â”‚  nginx       1/5                 20%      3 days ago            â”‚
â”‚                                                                 â”‚
â”‚  Total: 8 topics completed across 3 packages                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Reset Progress

Start fresh when needed:

```bash
# Reset all progress (requires confirmation)
cortex tutor --reset

# Reset progress for specific package only
cortex tutor --reset docker
```

---

## Architecture

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Request                             â”‚
â”‚                    cortex tutor docker                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLI Layer                                â”‚
â”‚                    (cortex/tutor/cli.py)                         â”‚
â”‚                                                                  â”‚
â”‚   â€¢ Parse arguments (package, --question, --progress, etc.)      â”‚
â”‚   â€¢ Route to appropriate handler                                 â”‚
â”‚   â€¢ Display Rich-formatted output                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TutorAgent                                  â”‚
â”‚                  (cortex/tutor/agent.py)                         â”‚
â”‚                                                                  â”‚
â”‚   â€¢ Orchestrates lesson generation and Q&A                       â”‚
â”‚   â€¢ Uses cortex.llm_router for LLM calls                         â”‚
â”‚   â€¢ Coordinates tools and caching                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deterministic  â”‚ â”‚   LLM Layer     â”‚ â”‚    Memory       â”‚
â”‚     Tools       â”‚ â”‚  (llm.py)       â”‚ â”‚    Layer        â”‚
â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚
â”‚ â€¢ validators    â”‚ â”‚ â€¢ Anthropic API â”‚ â”‚ â€¢ SQLite store  â”‚
â”‚ â€¢ lesson_loader â”‚ â”‚ â€¢ generate_lessonâ”‚ â”‚ â€¢ Cache mgmt    â”‚
â”‚ â€¢ progress_trk  â”‚ â”‚ â€¢ answer_questionâ”‚ â”‚ â€¢ Progress DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â”‚                   â–¼                   â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
        â”‚         â”‚   Claude API    â”‚           â”‚
        â”‚         â”‚   (Anthropic)   â”‚           â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Output Layer                                â”‚
â”‚                  (cortex/tutor/branding.py)                      â”‚
â”‚                                                                  â”‚
â”‚   â€¢ Rich console formatting                                      â”‚
â”‚   â€¢ Syntax-highlighted code blocks                               â”‚
â”‚   â€¢ Progress bars and tables                                     â”‚
â”‚   â€¢ Interactive menus                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cache-First Pattern

The tutor uses a simple cache-first pattern to minimize API costs:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CHECK CACHE                                 â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ Check Cache  â”‚â”€â”€â”€â–¶â”‚  Has Cache?  â”‚â”€â”€â”€â–¶â”‚ Use Cached   â”‚      â”‚
â”‚   â”‚   (FREE)     â”‚    â”‚              â”‚ Y  â”‚   Lesson     â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                              â”‚ N                                 â”‚
â”‚                              â–¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GENERATE CONTENT                            â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  cortex.tutor.llm      â”‚â”€â”€â”€â–¶â”‚    Claude API          â”‚      â”‚
â”‚   â”‚  (tool_use + Pydantic) â”‚    â”‚                        â”‚      â”‚
â”‚   â”‚  â€¢ generate_lesson()   â”‚    â”‚  â€¢ Lesson content      â”‚      â”‚
â”‚   â”‚  â€¢ answer_question()   â”‚    â”‚  â€¢ Q&A responses       â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â”‚  Cost: ~$0.01-0.02 per request                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CACHE & RETURN                              â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚   Validate   â”‚â”€â”€â”€â–¶â”‚ Cache Result â”‚â”€â”€â”€â–¶â”‚   Return     â”‚      â”‚
â”‚   â”‚   Response   â”‚    â”‚  (24h TTL)   â”‚    â”‚   to User    â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tool Classification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DETERMINISTIC TOOLS                           â”‚
â”‚                    (No LLM - Fast & Free)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ProgressTracker  â”‚  â”‚  LessonLoader   â”‚  â”‚   validators    â”‚  â”‚
â”‚  â”‚  (tools.py)     â”‚  â”‚   (tools.py)    â”‚  â”‚ (validators.py) â”‚  â”‚
â”‚  â”‚ â€¢ Get progress  â”‚  â”‚ â€¢ Load cache    â”‚  â”‚ â€¢ Validate pkg  â”‚  â”‚
â”‚  â”‚ â€¢ Update score  â”‚  â”‚ â€¢ Check expiry  â”‚  â”‚ â€¢ Sanitize inputâ”‚  â”‚
â”‚  â”‚ â€¢ Mark complete â”‚  â”‚ â€¢ Get fallback  â”‚  â”‚ â€¢ Block patternsâ”‚  â”‚
â”‚  â”‚ â€¢ Reset data    â”‚  â”‚ â€¢ Store lesson  â”‚  â”‚ â€¢ Length limits â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Speed: ~10ms | Cost: $0.00 | Reliability: 100%                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LLM FUNCTIONS                               â”‚
â”‚                   (cortex/tutor/llm.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    generate_lesson()        â”‚  â”‚   answer_question()     â”‚   â”‚
â”‚  â”‚                             â”‚  â”‚                         â”‚   â”‚
â”‚  â”‚ â€¢ Summary & explanation     â”‚  â”‚ â€¢ Q&A responses         â”‚   â”‚
â”‚  â”‚ â€¢ Code examples             â”‚  â”‚ â€¢ Code examples         â”‚   â”‚
â”‚  â”‚ â€¢ Tutorial steps            â”‚  â”‚ â€¢ Related topics        â”‚   â”‚
â”‚  â”‚ â€¢ Best practices            â”‚  â”‚ â€¢ Confidence score      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  Uses Anthropic tool_use with Pydantic models for structured    â”‚
â”‚  outputs (LessonResponse, QAResponse)                           â”‚
â”‚  Speed: 2-5s | Cost: ~$0.01-0.02 | Reliability: 95%+            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow Diagram

```
User Input                Processing                    Output
â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€

"cortex tutor docker"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLI Parser   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TutorAgent   â”‚â”€â”€â”€â”€â–¶â”‚ SQLite Cache  â”‚â”€â”€â”€â”€ Cache Hit? â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
        â”‚                                                   â”‚
        â”‚ Cache Miss                                        â”‚
        â–¼                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚    llm.py     â”‚â”€â”€â”€â”€â–¶â”‚  Claude API   â”‚                    â”‚
â”‚  (tool_use)   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
        â”‚                                                   â”‚
        â”‚ Generated Content                                 â”‚
        â–¼                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   Validator   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Valid Content
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cache Store  â”‚â”€â”€â”€â”€â–¶â”‚ Rich Console  â”‚â”€â”€â”€â–¶ Interactive Menu
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technical Design

### Project Structure

```
cortex/tutor/
â”œâ”€â”€ __init__.py          # Package exports
â”œâ”€â”€ agent.py             # TutorAgent & InteractiveTutor
â”œâ”€â”€ branding.py          # Rich console UI utilities
â”œâ”€â”€ cli.py               # CLI commands and argument parsing
â”œâ”€â”€ config.py            # Configuration management
â”œâ”€â”€ contracts.py         # Pydantic data models (Lesson, Progress, Quiz)
â”œâ”€â”€ llm.py               # LLM functions with layered prompts
â”œâ”€â”€ sqlite_store.py      # SQLite persistence layer
â”œâ”€â”€ tools.py             # Deterministic tools (no LLM)
â””â”€â”€ validators.py        # Input validation and sanitization
```

### Database Schema

```sql
-- Learning progress per package/topic
CREATE TABLE learning_progress (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    package_name TEXT NOT NULL,
    topic TEXT NOT NULL,
    completed BOOLEAN DEFAULT FALSE,
    score REAL DEFAULT 0.0,
    last_accessed TEXT,
    total_time_seconds INTEGER DEFAULT 0,
    UNIQUE(package_name, topic)
);

-- Quiz/assessment results
CREATE TABLE quiz_results (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    package_name TEXT NOT NULL,
    question TEXT NOT NULL,
    user_answer TEXT,
    correct BOOLEAN,
    timestamp TEXT DEFAULT CURRENT_TIMESTAMP
);

-- Student profile for personalization
CREATE TABLE student_profile (
    id INTEGER PRIMARY KEY,
    mastered_concepts TEXT,        -- JSON array
    weak_concepts TEXT,            -- JSON array
    learning_style TEXT,           -- visual, reading, hands-on
    last_session TEXT
);

-- Cached lessons to reduce API costs
CREATE TABLE lesson_cache (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    package_name TEXT UNIQUE NOT NULL,
    content TEXT NOT NULL,         -- JSON lesson data
    created_at TEXT NOT NULL,
    expires_at TEXT NOT NULL
);
```

---

## API Reference

### TutorAgent Class

```python
from cortex.tutor.agent import TutorAgent

# Initialize
agent = TutorAgent(verbose=False)

# Start a lesson
result = agent.teach("docker", force_fresh=False)
# Returns: {
#   "validation_passed": True,
#   "content": {
#     "summary": "...",
#     "explanation": "...",
#     "code_examples": [...],
#     "tutorial_steps": [...],
#     "best_practices": [...]
#   },
#   "cache_hit": True,
#   "cost_usd": 0.0
# }

# Ask a question
answer = agent.ask("docker", "How do I build an image?")
# Returns: {
#   "validation_passed": True,
#   "content": {
#     "answer": "...",
#     "code_example": {...},
#     "related_topics": [...]
#   }
# }

# Get progress
progress = agent.get_progress("docker")
# Returns: {
#   "success": True,
#   "stats": {
#     "completed": 3,
#     "total": 5,
#     "score": 0.75
#   }
# }

# Update learning style
agent.update_learning_style("hands-on")  # visual, reading, hands-on

# Mark topic completed
agent.mark_completed("docker", "containers", score=0.9)

# Reset progress
agent.reset_progress("docker")  # or None for all
```

### InteractiveTutor Class

```python
from cortex.tutor.agent import InteractiveTutor

# Start interactive session
tutor = InteractiveTutor("docker")
tutor.start()  # Enters interactive menu loop
```

### CLI Functions

```python
from cortex.tutor.cli import (
    cmd_teach,
    cmd_question,
    cmd_list_packages,
    cmd_progress,
    cmd_reset,
)

# Start interactive lesson
exit_code = cmd_teach("docker", verbose=False, force_fresh=False)

# Ask a question
exit_code = cmd_question("docker", "What is Docker?", verbose=False)

# List packages
exit_code = cmd_list_packages()

# Show progress
exit_code = cmd_progress(package_name=None)  # All packages
exit_code = cmd_progress(package_name="docker")  # Specific

# Reset progress
exit_code = cmd_reset(package_name=None)  # All (with confirmation)
exit_code = cmd_reset(package_name="docker")  # Specific
```

---

## Configuration

### Environment Variables

```bash
# Required: API key for Claude
export ANTHROPIC_API_KEY=your-api-key-here

# Optional: Enable debug output
export TUTOR_DEBUG=true

# Optional: Custom data directory (default: ~/.cortex)
export TUTOR_DATA_DIR=~/.cortex

# Optional: Force offline fallback mode (use pre-built lessons)
export TUTOR_OFFLINE=true

# Optional: LLM model name (default: claude-sonnet-4-20250514)
export TUTOR_MODEL_NAME=claude-sonnet-4-20250514

# Optional: Cache TTL in hours (default: 24)
export TUTOR_CACHE_TTL_HOURS=24
```

### Config File

Configuration can also be set in `~/.cortex/config.yaml`:

```yaml
tutor:
  cache_ttl_hours: 24
  model_name: claude-sonnet-4-20250514
  debug: false
  offline: false
```

---

## Testing

### Run Tests

```bash
# Run all tutor tests
pytest tests/tutor/ -v

# Run with coverage
pytest tests/tutor/ -v --cov=cortex.tutor --cov-report=term-missing

# Run specific test file
pytest tests/tutor/test_cli.py -v
```

---

## Troubleshooting

### Common Issues

<details>
<summary><strong>"No API key found"</strong></summary>

```bash
# Set the API key
export ANTHROPIC_API_KEY=your-api-key-here

# Or add to ~/.cortex/.env
echo 'ANTHROPIC_API_KEY=your-api-key-here' >> ~/.cortex/.env
```
</details>

<details>
<summary><strong>"Rate limit exceeded"</strong></summary>

The tutor caches lessons to minimize API calls. If you hit rate limits:

```bash
# Wait a few minutes, or use cached content
cortex tutor docker  # Will use cache if available

# Check your Anthropic dashboard for rate limit status
```
</details>

<details>
<summary><strong>"Lesson generation failed"</strong></summary>

The tutor has fallback lessons for common packages:

```bash
# These packages have offline fallbacks:
# docker, git, nginx, python, node, postgresql, redis

# Force fallback mode
export TUTOR_OFFLINE=true
cortex tutor docker
```
</details>

<details>
<summary><strong>"Progress not saving"</strong></summary>

Check SQLite database permissions:

```bash
# Check database location
ls -la ~/.cortex/tutor_progress.db

# Fix permissions if needed
chmod 644 ~/.cortex/tutor_progress.db
```
</details>

---

## Contributing

See [CONTRIBUTING.md](../CONTRIBUTING.md) for guidelines.

### Development Setup

```bash
# Clone and setup
git clone https://github.com/cortexlinux/cortex.git
cd cortex

# Create venv and install dev dependencies
python3 -m venv venv
source venv/bin/activate
pip install -e ".[dev]"

# Run tutor tests
pytest tests/tutor/ -v
```

---

## License

Apache 2.0 - See [LICENSE](../LICENSE) for details.

---

<p align="center">
  <sub>Built with â¤ï¸ for the Cortex Linux community</sub>
</p>
